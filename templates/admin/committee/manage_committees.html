{% extends "admin/base.html" %}
{% block content %}
<div class="page-header">
    <h1>Manage Committees</h1>
    <a href="{{ url_for('committee_routes.add_or_edit_committee') }}" class="btn btn-primary">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
        Add New Committee
    </a>
</div>

{% if committees %}
<div class="table-container">
    <table>
        <thead>
            <tr>
                <th>S.No</th>
                <th>Committee Name</th>
                <th>Type</th>
                <th>Members</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for committee in committees %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>{{ committee.name }}</td>
                <td><span class="badge badge-{{ 'primary' if 'college' in committee.type.lower() else 'secondary' }}">{{ committee.type }}</span></td>
                <td>{{ committee.members|length }}</td>
                <td class="action-buttons">
                    <a href="{{ url_for('committee_routes.manage_members', committee_id=committee.id) }}" class="btn btn-sm btn-info" title="Manage Members">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                        Members
                    </a>
                    <a href="{{ url_for('committee_routes.add_or_edit_committee', id=committee.id) }}" class="btn btn-sm btn-warning" title="Edit Committee">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                        Edit
                    </a>
                    <form action="{{ url_for('committee_routes.delete_committee', id=committee.id) }}" method="post" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this committee? All associated members will also be deleted.');">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <button type="submit" class="btn btn-sm btn-danger" title="Delete Committee">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3 6 5 6 21 6"></polyline>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                            </svg>
                            Delete
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="empty-state">
    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
        <circle cx="9" cy="7" r="4"></circle>
        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
    </svg>
    <h3>No Committees Found</h3>
    <p>Get started by creating your first committee.</p>
    <a href="{{ url_for('committee_routes.add_or_edit_committee') }}" class="btn btn-primary">Add Committee</a>
</div>
{% endif %}
{% endblock %}